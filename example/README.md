# Пример конфигурации и работы с Infinispan в SpringBoot

В конфигурации есть хардкодные IP, которые остались после процесса исследования проблемы Discovery с Consul по DNS Query.
Проблема пока не решена.

Суть проблемы: может возникнуть ситуация, в которой каждая нода, пока не нашла других, будет считать себя координатором,
внесенные изменения в кэш за это время не будут реплицированы, хотя будут сохранены в Store. Это приводит к разному состоянию кэша на разных нодах.
Также при получении DNS ответа, Infinispan опрашивает ноды не только по портам Infinispan, но и по порту, на котором слушает Web, т.е. 8080, например.
Томкату такие TCP запросы совсем не нужны )) Он на них ругается )
В логах:
2023-08-17 13:49:33.763 TRACE 29085 --- [luster,pc-32624] org.jgroups.protocols.dns.DNS_PING       : pc-32624: sending discovery request to 192.168.1.201:8080
2023-08-17 13:49:33.763 TRACE 29085 --- [luster,pc-32624] org.jgroups.protocols.dns.DNS_PING       : pc-32624: sending discovery request to 192.168.1.201:7800